import cv2
import numpy as np

# Пример списка блоков 8x8 (seg)
seg = [
    [
        [140, 144, 147, 140, 140, 155, 179, 175],
        [144, 152, 140, 147, 140, 148, 167, 179],
        [152, 155, 136, 167, 163, 162, 152, 172],
        [168, 145, 156, 160, 152, 155, 136, 160],
        [162, 148, 136, 147, 162, 147, 162, 162],
        [147, 167, 136, 136, 156, 163, 147, 172],
        [136, 156, 123, 162, 144, 140, 147, 168],
        [148, 155, 136, 155, 152, 147, 147, 168]
    ],
    [
        [100, 120, 130, 140, 150, 160, 170, 180],
        [110, 130, 140, 150, 160, 170, 180, 190],
        [120, 140, 150, 160, 170, 180, 190, 200],
        [130, 150, 160, 170, 180, 190, 200, 210],
        [140, 160, 170, 180, 190, 200, 210, 220],
        [150, 170, 180, 190, 200, 210, 220, 230],
        [160, 180, 190, 200, 210, 220, 230, 240],
        [170, 190, 200, 210, 220, 230, 240, 250]
    ]
]

# Преобразуем каждый блок в float32
seg_float32 = [np.array(block, dtype=np.float32) for block in seg]

# Применяем ДКП к каждому блоку
dct_seg = []
for block in seg_float32:
    try:
        dct_block = cv2.dct(block)
        dct_seg.append(dct_block)
    except Exception as e:
        print(f"Ошибка при обработке блока: {e}")
        print("Блок:")
        print(block)

# Выводим результат
print("Результат ДКП для всех блоков (dct_seg):")
for i, dct_block in enumerate(dct_seg):
    print(f"Блок {i + 1}:")
    print(dct_block)